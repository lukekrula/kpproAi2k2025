-- H2 2.4.240; 
;              
CREATE USER IF NOT EXISTS "SA" SALT '4ca5fe609810fa92' HASH 'c338c293ed6d0b9f1b4a6aea7c23e48b149e9d0fa23bd77663f84097e2115d2c' ADMIN;          
CREATE CACHED TABLE "PUBLIC"."PARTICIPATION_REQUEST"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1 RESTART WITH 5) NOT NULL,
    "PROGRAM_ID" BIGINT NOT NULL,
    "COMMUNITY_ID" BIGINT NOT NULL,
    "PARTNER_ID" BIGINT NOT NULL,
    "CREATOR_USER_ID" BIGINT NOT NULL,
    "NAME" CHARACTER VARYING(255),
    "DESCRIPTION" CHARACTER VARYING,
    "AMOUNT_REQUESTED" DOUBLE PRECISION,
    "AMOUNT_APPROVED" DOUBLE PRECISION,
    "PROPOSAL_TEXT" CHARACTER VARYING,
    "STATUS" CHARACTER VARYING(50),
    "CREATED_AT" TIMESTAMP,
    "UPDATED_AT" TIMESTAMP,
    "MANAGER_ID" BIGINT
);            
ALTER TABLE "PUBLIC"."PARTICIPATION_REQUEST" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_7" PRIMARY KEY("ID");         
-- 3 +/- SELECT COUNT(*) FROM PUBLIC.PARTICIPATION_REQUEST;    
INSERT INTO "PUBLIC"."PARTICIPATION_REQUEST" VALUES
(2, 1, 2, 1, 3, 'Grunt', U&'potrebujeme pen\00edze moc', 20000.0, 0.0, 'prosim penize', 'PENDING', TIMESTAMP '2026-01-07 20:58:57.187927', TIMESTAMP '2026-01-07 20:58:57.187927', 6),
(3, 1, 2, 1, 3, NULL, 'dasasdsda', 345.0, 0.0, 'asdsaads', 'PENDING', TIMESTAMP '2026-01-07 22:15:46.768082', TIMESTAMP '2026-01-07 22:15:46.768082', 3),
(4, 1, 2, 1, 3, NULL, 'jeste', 4000.0, 0.0, 'Zkusim', 'PENDING', TIMESTAMP '2026-01-07 23:02:08.47438', TIMESTAMP '2026-01-07 23:02:08.47438', 3);        
ALTER TABLE "PUBLIC"."PARTICIPATION_REQUEST" ADD CONSTRAINT "PUBLIC"."FK_PR_MANAGER" FOREIGN KEY("MANAGER_ID") REFERENCES "PUBLIC"."MEMBER"("ID") NOCHECK;     
ALTER TABLE "PUBLIC"."PARTICIPATION_REQUEST" ADD CONSTRAINT "PUBLIC"."FK_PR_CREATOR" FOREIGN KEY("CREATOR_USER_ID") REFERENCES "PUBLIC"."MEMBER"("ID") NOCHECK;
ALTER TABLE "PUBLIC"."PARTICIPATION_REQUEST" ADD CONSTRAINT "PUBLIC"."FK_PR_PARTNER" FOREIGN KEY("PARTNER_ID") REFERENCES "PUBLIC"."PARTNER"("ID") NOCHECK;    
ALTER TABLE "PUBLIC"."PARTICIPATION_REQUEST" ADD CONSTRAINT "PUBLIC"."FK_PR_PROGRAM" FOREIGN KEY("PROGRAM_ID") REFERENCES "PUBLIC"."PROGRAM"("ID") NOCHECK;    
ALTER TABLE "PUBLIC"."PARTICIPATION_REQUEST" ADD CONSTRAINT "PUBLIC"."FK_PR_COMMUNITY" FOREIGN KEY("COMMUNITY_ID") REFERENCES "PUBLIC"."COMMUNITY"("ID") NOCHECK;              
